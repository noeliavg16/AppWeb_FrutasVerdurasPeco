<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PecoVerduras</title>
    <script src="https://kit.fontawesome.com/dbed3c338a.js" crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<script src="/Javascript/peco.js" ></script>
    <link rel="stylesheet"  href="/css/variables.css">
    <link rel="stylesheet"  href="/css/footer.css">
    <link rel="stylesheet"  href="/css/header.css">
     <link rel="stylesheet"  href="/css/promocion.css">
      <link rel="stylesheet"  href="/css/tramitar.css">
</head>
<body>
	<div class="cursor"></div>
	<div class="preloader" id="cargarLoad">
		<div class="lds-roller">
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
		</div>
	</div>
<header>
	<div class="FondoHeader1">
		<img src="/css/imagenes/Varias/fondo2.jpg">
	</div>
	<div class="FondoHeader2">
		<img src="/css/imagenes/Varias/presentacion2.png">
	</div>
		<div class="contenedorBurbujas">
        			<div class="burgujas">
						<span style="--i:11;"></span>
						<span style="--i:12;"></span>
						<span style="--i:24;"></span>
						<span style="--i:10;"></span>
						<span style="--i:14;"></span>
						<span style="--i:23;"></span>
						<span style="--i:18;"></span>
						<span style="--i:16;"></span>
						<span style="--i:19;"></span>
						<span style="--i:20;"></span>
						<span style="--i:22;"></span>
						<span style="--i:15;"></span>
						<span style="--i:18;"></span>
						<span style="--i:21;"></span>
						<span style="--i:15;"></span>
						<span style="--i:13;"></span>
						<span style="--i:26;"></span>
						<span style="--i:17;"></span>
						<span style="--i:13;"></span>
						<span style="--i:28;"></span>
					</div>
				</div>
	<div class="gerardContenedorDeskop">
		<div class="gerardPreHeaderDeskop">
			<div class="gerardBenvenido">
			<span>Benvenido/a: </span><span class="usuario" sec:authorize="isAuthenticated()" th:text="${session.usuario.nombre}"></span>
      						  <span class="nuevoUsuario" sec:authorize="!isAuthenticated()"> Nuevo Usuario</span>
		</div>
		<div class="gerardCerrarSession">
				<span  sec:authorize="isAuthenticated()">
					<a th:href="@{/cerrar}">Cerrar Session
						<i class="fa-solid fa-right-from-bracket"></i>
					</a>
				</span>
			</div>
		</div>
		<div class="gerardContenedorNavegador">
			<div class="gerardContenedorWidth">
				<div class="gerardNavegadorGrande">
					<div class="gerardContenidoDesckop">
						<div class="gerardContenedorLogo">
							<a th:href="@{/}"><img src="/css/imagenes/Varias/logo.png"></a>
						</div>
						<ul>
							<li><a th:href="@{/tienda}">Tienda</a></li>
							<li><a th:href="@{/promociones}">Promociones</a></li>
							<li><a th:href="@{/quienesSomos}">Quienes Somos</a></li>
							<li><a th:href="@{/contacto}">Contacto</a></li>
						</ul>
					</div>
				</div>
				<div class="gerardNavegadorPequeño">
					<div class="gerardContNavBotones">
						<a th:href="@{/signup}">
						<button id="pulsar2" class="gerardRegistro" sec:authorize="!isAuthenticated()">
							<i class="fa-solid fa-user-plus"></i>
						</button></a>
						<a th:href="@{/login}">
						<button id="pulsar3" class="gerardLogin" sec:authorize="!isAuthenticated()">
							<i class="fa-solid fa-user"></i>
						</button></a>
						<a th:href="@{/carro}">
						<button id="pulsar1" class="gerardCesta" sec:authorize="isAuthenticated()">
							<i class="fa-solid fa-basket-shopping"></i>
						</button></a>
						<a th:href="@{/usuario}">
						<button id="pulsar4" class="MiUsuario" sec:authorize="isAuthenticated()">
							<i class="fa-solid fa-house-user"></i>
						</button></a>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="gerardContenedorMobil">
		<div id="fondoNegro"></div>
		<div class="gerardContenedorLogoMobil">
			<a th:href="@{/}">
					<img src="/css/imagenes/Varias/logo2.png"></a>
			<div class="gerardMenuMobilActivo">
				<div id="btnCerrarMovil" class="gerardCerrarMobil">
					<button>.</button>
				</div>
				<div class="gerardContenedorLogoActivo">
					<a th:href="@{/}">
					<img src="/css/imagenes/Varias/logo2.png"></a>
				</div>
				<div class="gerardContenedorOpciones">
				<div class="UsuarioMovil">
				<span>Benvenido/a: </span><span class="usuario" sec:authorize="isAuthenticated()" th:text="${session.usuario.nombre}"></span>
      						  <span class="nuevoUsuario" sec:authorize="!isAuthenticated()"> Nuevo Usuario</span>
				</div>
					<ul class="gerardlistaOpciones">
						<li><p>Mi Usuario</p>
							<ol class="gerardOpcinesUsuario" sec:authorize="isAuthenticated()">
								<li><a th:href="@{/usuario}">Datos Personales</a></li>
								<li><a th:href="@{/pedidos}">Mis Pedidos</a></li>
								<li><a th:href="@{/favoritos}">Productos Favoritos</a></li>
								<li><a th:href="@{/direcciones}">Direcciones</a></li>
								<li><a th:href="@{/pagos}">Metodos de Pago</a></li>
								<li><a th:href="@{/club}">Peco Club</a></li>
								<li><a th:href="@{/comentario}">Mis Comentarios</a></li>
							</ol>
						</li>
						<li><p>Tienda</p>
							<ul class="gerardOpcionesTienda">
								<li><a th:href="@{/frutas}">Frutas</a></li>
								<li><a th:href="@{/verduras}">Verduras</a></li>
								<li><a th:href="@{/productos}">Productos Varios</a></li>
							</ul>
						</li>
						<li><a th:href="@{/promociones}">Promociones</a></li>
						<li><a th:href="@{/quienesSomos}">Quienes Somos</a></li>
						<li><a th:href="@{/contacto}">Contacto</a></li>
						<li sec:authorize="!isAuthenticated()"><a th:href="@{/login}">Iniciar Session</a></li>
						<li sec:authorize="!isAuthenticated()"><a th:href="@{/signup}">Registrar</a></li>
						<li sec:authorize="isAuthenticated()"><a th:href="@{/cerrar}">Cerrar Session</a></li>
					</ul>
				</div>
			</div>
		</div>
		<div class="gerardCestaHamburgesa">
			<div class="gerardCestaMobil">
				<a th:href="@{/carro}" sec:authorize="isAuthenticated()"><i class="fa-solid fa-basket-shopping"></i></a>
			</div>
			<div class="gerardContenedorbtnHamburgesa">
				<button id="btnMovil" class="btnHamburgesa">
					<span></span>
				</button>
			</div>
		</div>
	</div>
</header>
<section>
    <div class="gerardContenedorPadre">
    	<div class="contenedorTramitarCompra">
    		<div class="gerardNavegador">
	   			<ul>
	   				<li sec:authorize="isAuthenticated()">
	   					<div>
	   						<i class="fa-solid fa-user"></i>
	   						<a th:href="@{/usuario}">Datos Personales</a>
	   					</div>
	   				</li>
	   				<li sec:authorize="isAuthenticated()">
	   					<div>
	   						<i class="fa-solid fa-box"></i>
	   						<a th:href="@{/pedidos}">Mis Pedidos</a>
	   					</div>
	   				</li>
	   				<li>
	   					<div>
	   						<i class="fa-solid fa-apple-whole"></i>
	   						<a th:href="@{/frutas}">Frutas</a>
	   					</div>
	   				</li>
	   				<li>
	   					<div>
	   						<i class="fa-solid fa-carrot"></i>
	   						<a th:href="@{/verduras}">Verduras</a>
	   					</div>
	   				</li>
	   				<li>
	   					<div>
	   						<i class="fa-solid fa-jar"></i>
	   						<a th:href="@{/productos}">Productos Varios</a>
	   					</div>
	   				</li>
	   				<li>
	   					<div>
	   						<i class="fa-solid fa-bullhorn"></i>
	   						<a th:href="@{/promociones}">Promociones</a>
	   					</div>
	   				</li>
	   				<li sec:authorize="hasAnyRole('ROLE_ADMINISTRADOR')">
	 				<div>
		 				<i class="fa-solid fa-info"></i>
		 				<a th:href="@{/activar/producto}">Activar Producto</a>
	 				</div>
	 			</li>
	 			<li sec:authorize="hasAnyRole('ROLE_ADMINISTRADOR')">
	 				<div>
		 				<i class="fa-solid fa-pencil"></i>
		 				<a th:href="@{/agregar/producto}">Añadir Producto</a>
	 				</div>
	 			</li>
	   			</ul>
   			</div>
   			<div class="contenedorCompra" th:object="${pedido}">
   				<form th:action="@{/tramitar/{id} (id=*{idPedido})}" method="post">
   					<div class="gerardDatosUsuario">
   						<div class="gerardTituloSeccion">
   							<label>Datos Personales</label>
   						</div>
   						<div class="datosPersonales">
   							<div class="gerardNombreUsuario">
   								<label>Nombre: </label>
   								<input type="text" name="nombre" th:value="*{usuario.nombre}" required>
   							</div>
   							<div class="gerard1ApellidoUsuario">
   								<label>Primer Apellido: </label>
   								<input type="text" name="primerApellido" th:value="*{usuario.primerApellido}" required>
   							</div>
   							<div class="gerard2ApellidoUsuario">
   								<label>Segundo Apellido: </label>
   								<input type="text" name="segundoApellido" th:value="*{usuario.segundoApellido}" required>
   							</div>
   							<div class="gerardEmailUsuario">
   								<label>Email: </label>
   								<input type="text" name="email" th:value="*{usuario.email}" required>
   							</div>
   							<div class="gerardTelefonoUsuario">
   								<label>Telefono: </label>
   								<input type="text" name="telefono" th:value="*{usuario.telefono}" required>
   							</div>
   						</div>
   					</div>
   					<div class="gerardDatosFacturacion">
   						<div class="gerardTituloSeccion">
   							<label>Datos Facturación</label>
   						</div>
   						<div class="datosFacturacion">
   							<div class="contenedorDireccionEnvio">
	   							<label>Dirección envío</label>
	   							<div class="gerardDireccionEnvio">
	   								<select name="direccion" required>
	        							<option th:each="direcciones : ${direccion}" th:value="${direcciones.idDireccion}" 
	        							th:text="${direcciones.calle + ' ' + direcciones.numero + ' ' +
	        							direcciones.piso + ' ' + direcciones.puerta}"></option>
	        						</select>
	        						<div class="formulariobtn">
	        							<a th:href="@{/agregarDireccion}">Agregar</a>
	        						</div>
	   							</div>
   							</div>
   							<div class="contenedorDireccionFacturacion">
   								<label>Dirección facturación</label>
	   							<div class="gerardDireccionFacturacion">
	   								<select name="direccionFac" required>
	        							<option th:each="direcciones : ${direccion}" th:value="${direcciones.idDireccion}" 
	        							th:text="${direcciones.calle + ' ' + direcciones.numero + ' ' +
	        							direcciones.piso + ' ' + direcciones.puerta}"></option>
	        						</select>
	        						<div class="formulariobtn">
	        							<a th:href="@{/agregarDireccion}">Agregar</a>
	        						</div>
	   							</div>
   							</div>
   							<div class="contenedorDeTarjetas">
	   							<label>Tarjeta</label>
	   							<div class="gerardTarjetas">
	   								<select name="numeroTarjeta" required>
	        							<option th:each="cuenta : ${cuentas}" th:value="${cuenta.idCuenta}" 
	        							th:text="${cuenta?.numeroTarjeta}"></option>
	        						</select>
	        						<div class="formulariobtn">
	        							<a th:href="@{/misMetodosDePagoAdd}">Agregar</a>
	        						</div>
	   							</div>
   							</div>
   						</div>
   					</div>
   					<div class="gerardContenedorProductos">
   						<div class="gerardTituloSeccion">
   							<label>Lista Productos</label>
   						</div>
   						<div class="listaProductosCompra" th:each="lista : ${productos}">
   							<div class="grupo1">
	   							<div class="imagenProducto">
	   								<label class="tablaTitulo">Imagen</label>
	   								<img th:src="${lista.producto.imagen}">
	   							</div>
	   							<div class="nombreProducto">
	   								<label class="tablaTitulo">Nombre</label>
	   								<label th:text="${lista.producto.nombre}"></label>
	   							</div>
   							</div>
   							<div class="grupo2">
	   							<div class="cantiadProducto">
	   								<label class="tablaTitulo">Cantidad</label>
	   								<label th:text="${lista.cantidad}"></label>
	   							</div>
	   							<div class="precioCompraProducto">
	   								<label class="tablaTitulo">Precio</label>
	   								<label th:text="${lista.precioProducto}"></label>
	   							</div>
   							</div>
   							<div class="grupo3">
   								<label class="tablaTitulo">Opcion</label>
   									<div class="formulariobtn">
   									<a th:href="@{/CancelarProductoCompra/{id} (id=${lista.idCompra})}">Cancelar</a>
   								</div>
   							</div>
   						</div>
   					</div>
   					<div class="TramitarCompra">
   						<div class="gerardTituloSeccion">
   							<label>Tramitar Pedido</label>
   						</div>
   						<div class="gastosEnvio" sec:authorize="hasAnyRole('ROLE_CLIENTE')">
   							<label>Costes del envío del Pedido:</label>
   							<label>6.90€</label>
   						</div>
   						<div class="utilizarPuntos">
   							<label>¿Utilizar mis puntos acumulados?</label>
   							<div class="contendorDeLosPuntos">
	   							<label th:text="${session.usuario.misPuntos} + 'p'"></label>
	   							<label>=</label>
	   							<label th:text="${#numbers.formatDecimal(session.usuario.misPuntos * 0.01, 1, 2)} + '€'"></label>
   							</div>
   							<button class="formulariobtn">
   								<a th:href="@{/utilizarPuntos/{id} (id=${pedido.idPedido})}">Utilizar puntos</a>
   							</button>
   						</div>
   						<div class="clientePecoClub" sec:authorize="hasAnyRole('ROLE_CLIENTEVIP','ROLE_FAMILIA','ROLE_ADMINISTRADOR')">
   							<label>Eres Cliente de Peco Club tienes el envio Gratuito</label>
   						</div>
   						<div class="clienteFamiliaNumeros"sec:authorize="hasAnyRole('ROLE_FAMILIA')">
   							<label>Descuento de Familia Numerosa:</label>
   							<label>30%</label>
   						</div>
   						<div class="TotalPedido">
   							<label>Importe Total del pedido:</label>
   							<label th:text="*{total}"></label>
   						</div>
   					</div>
   					<div class="envioGratuito" sec:authorize="hasAnyRole('ROLE_CLIENTEVIP,ROLE_FAMILIA,ROLE_ADMINISTRADOR')">
   						<label>El envío será gratuito si la compra supera los 59.90€</label>
   					</div>
   					<div class="botonRealizarPedido">
   						<button type="submit"  class="formulariobtn">
   								<label>Realizar Pedido</label>
   						</button>
   					</div>	
   				</form>
   			</div>
    	</div>
    </div>
</section>
<footer>
	<div class=gerardContenedorFooter>
		<div >
			<ul class=gerardContendorContacto th:object="${empresa}">
				<li>Contacto:</li>
				<li>
					<span th:text="*{calle}"></span>
					<span th:text="*{numero}"></span>
				</li>
				<li th:text="*{email}"></li>
				<li th:text="*{telefono}"></li>
			</ul>
			</div>
		<div >
			<ul class=gerardContenedorLegal >
				<li>Legal:</li>
				<li>
					<a th:href="@{/politica}">Política de Privacidad</a>
				</li>
				<li>
					<a th:href="@{/NormaEnvio}">Normas de Envío</a>
				</li>
				<li>
					<a th:href="@{/terminos}">Términos y condiciones</a>
				</li>
			</ul>
			</div>
	</div>
	<div class="gerardImagenFooter">
		<img src="/css/imagenes/Varias/fondoFooter.jpg">
	</div>
	<div class="gerardCopyrigth">
		<div>
			<p>CopyRigth 
				<span> <i class="fa-regular fa-copyright"></i></span>
				2024
			</p>
		</div>
	</div>
</footer>
</body>
</html>
